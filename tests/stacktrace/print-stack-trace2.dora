//= cannon
//= vm-args "--gc=copy --gc-stress --disable-tlab"
//= stdout "0: b() -> Stacktrace: 20\n1: a() -> Stacktrace: 16\n2: main(): 6\n"

fun main() {
  let e = a();

  // this should test if backtrace in Exception is created the right way
  // by retrieveStackTrace (as Array[Int32])
  forceCollect();

  e.printStacktrace();
}

fun a() -> Stacktrace {
  return b();
}

fun b() -> Stacktrace {
  return Stacktrace();
}