//= vm-args "--gc-young-size=64M --max-heap-size=128M"
//= config region

class MyThread(): std::Thread {
    @override fn run() {
        allocator();
        println("done");
    }
}

fn main() {
    var i = 0I;

    while i < 4I {
        let thread = MyThread();
        thread.start();
        i = i + 1I;
    }

    allocator();
    println("done");
}

fn allocator() {
    var i = 0I;

    while i < 10_000I {
        Foo();
        i = i + 1I;
    }
}

class Foo