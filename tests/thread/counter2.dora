//= stdout "done\n"

class MyThread(var executed: Bool) extends std::Thread {
    @override fn run() {
        self.f();
    }

    fn f() {
        self.g();
    }

    fn g() {
        self.executed = true;
    }

    fn h() {
        while !self.executed {
            // sleep(1);
        }

        println("done");
    }
}

fn main() {
    let thread = MyThread(false);
    thread.start();

    thread.h();
}
