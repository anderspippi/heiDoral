//= vm-args "--gc=copy"
use std::collections::BitVec;

fn main() {
    let mut i = 0i32;
    let ids = BitVec::new();

    while i < 10_000i32 {
        let thread = std::thread::spawn(|| {});
        assert(!ids.contains(thread.id()));
        ids.insert(thread.id());

        if i % 1_000i32 == 0i32 {
            std::forceCollect();
        }

        i = i + 1i32;
    }
}
