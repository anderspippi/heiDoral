//= vm-args "--gc=swiper --gc-verify"

fun main() {
  let x = Foo(1I, nil);
  forceMinorCollect();
  forceMinorCollect();
  // write into old object x reference to young object
  x.next = Foo(2I, nil);
  forceMinorCollect();
  assert(x.next.a == 2I);
}

class Foo(let a: Int32, var next: Foo)
